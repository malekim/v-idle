import{defineComponent as e,ref as n,onMounted as t,nextTick as a,onBeforeUnmount as r,h as u}from"vue-demi";var l=e({emits:["idle","remind","refresh"],props:{duration:{type:Number,default:300},events:{type:Array,default:function(){return["mousemove","keypress"]}},loop:{type:Boolean,default:!1},reminders:{type:Array,default:function(){return[]}},wait:{type:Number,default:0}},setup:function(e,u){var l=u.emit,v=n("ed"),o=n(void 0),i=n(0),d=n(void 0),c=n(0),s=n(""),f=n(""),p=function(){if(c.value=e.duration-((Date.now()-i.value)/1e3|0),c.value<0&&!e.loop)return clearInterval(o.value),void clearInterval(d.value);e.reminders.length>0&&e.reminders.includes(c.value)&&w();var n=c.value/60|0,t=c.value%60|0;s.value="".concat(n<10?"0"+n:n),f.value="".concat(t<10?"0"+t:t),v.value="".concat(s.value,":").concat(f.value)},m=function(){p(),c.value<=0&&e.loop&&(i.value=Date.now()+1e3)},y=function(){l("idle")},w=function(){l("remind")},I=function(){o.value=window.setInterval(y,1e3*e.duration),d.value=window.setInterval(m,1e3)},h=function(e){var n={type:e.type,key:e instanceof KeyboardEvent?e.key:void 0};l("refresh",n),clearInterval(o.value),clearInterval(d.value),p(),i.value=Date.now(),c.value=0,I()};return t((function(){setTimeout((function(){i.value=Date.now(),p(),a((function(){I();for(var n=e.events.length-1;n>=0;n-=1)window.addEventListener(e.events[n],h)}))}),1e3*e.wait)})),r((function(){clearInterval(o.value),clearInterval(d.value);for(var n=e.events.length-1;n>=0;n-=1)window.removeEventListener(e.events[n],h)})),{display:v}},render:function(){return u("div",{class:"v-idle"},this.display)}});export{l as default};
//# sourceMappingURL=vidle.esm.min.js.map
