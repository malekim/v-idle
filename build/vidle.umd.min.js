!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("vue-demi")):"function"==typeof define&&define.amd?define(["vue-demi"],n):(e="undefined"!=typeof globalThis?globalThis:e||self)["v-idle"]=n(e.VueDemi)}(this,(function(e){"use strict";return e.defineComponent({emits:["idle","remind","refresh"],props:{duration:{type:Number,default:300},events:{type:Array,default:function(){return["mousemove","keypress"]}},loop:{type:Boolean,default:!1},reminders:{type:Array,default:function(){return[]}},wait:{type:Number,default:0}},setup:function(n,t){var r=t.emit,a=e.ref("ed"),u=e.ref(void 0),o=e.ref(0),i=e.ref(void 0),l=e.ref(0),v=e.ref(""),d=e.ref(""),f=function(){if(l.value=n.duration-((Date.now()-o.value)/1e3|0),l.value<0&&!n.loop)return clearInterval(u.value),void clearInterval(i.value);n.reminders.length>0&&n.reminders.includes(l.value)&&p();var e=l.value/60|0,t=l.value%60|0;v.value="".concat(e<10?"0"+e:e),d.value="".concat(t<10?"0"+t:t),a.value="".concat(v.value,":").concat(d.value)},c=function(){f(),l.value<=0&&n.loop&&(o.value=Date.now()+1e3)},s=function(){r("idle")},p=function(){r("remind")},m=function(){u.value=window.setInterval(s,1e3*n.duration),i.value=window.setInterval(c,1e3)},y=function(e){var n={type:e.type,key:e instanceof KeyboardEvent?e.key:void 0};r("refresh",n),clearInterval(u.value),clearInterval(i.value),f(),o.value=Date.now(),l.value=0,m()};return e.onMounted((function(){setTimeout((function(){o.value=Date.now(),f(),e.nextTick((function(){m();for(var e=n.events.length-1;e>=0;e-=1)window.addEventListener(n.events[e],y)}))}),1e3*n.wait)})),e.onBeforeUnmount((function(){clearInterval(u.value),clearInterval(i.value);for(var e=n.events.length-1;e>=0;e-=1)window.removeEventListener(n.events[e],y)})),{display:a}},render:function(){return e.h("div",{class:"v-idle"},this.display)}})}));
//# sourceMappingURL=vidle.umd.min.js.map
