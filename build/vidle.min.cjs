"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("vue").extend({render:function(t){return t("div",{class:"v-idle"},this.display)},props:{duration:{type:Number,default:300},events:{type:Array,default:function(){return["mousemove","keypress"]}},loop:{type:Boolean,default:!1},reminders:{type:Array,default:function(){return[]}},wait:{type:Number,default:0}},data:function(){return{display:"",timer:void 0,start:0,counter:void 0,diff:0,minutes:"",seconds:""}},mounted:function(){var t=this;setTimeout((function(){t.start=Date.now(),t.setDisplay(),t.$nextTick((function(){t.setTimer();for(var e=t.events.length-1;e>=0;e-=1)window.addEventListener(t.events[e],t.clearTimer)}))}),1e3*this.wait)},methods:{setDisplay:function(){if(this.diff=this.duration-((Date.now()-this.start)/1e3|0),!(this.diff<0)||this.loop){this.shouldRemind();var t=this.diff/60|0,e=this.diff%60|0;this.minutes="".concat(t<10?"0"+t:t),this.seconds="".concat(e<10?"0"+e:e),this.display="".concat(this.minutes,":").concat(this.seconds)}},shouldRemind:function(){this.reminders.length>0&&this.reminders.includes(this.diff)&&this.remind()},countdown:function(){this.setDisplay(),this.diff<=0&&this.loop&&(this.start=Date.now()+1e3)},idle:function(){this.$emit("idle")},remind:function(){this.$emit("remind",this.diff)},setTimer:function(){this.timer=window.setInterval(this.idle,1e3*this.duration),this.counter=window.setInterval(this.countdown,1e3)},clearTimer:function(t){var e={type:t.type,key:t instanceof KeyboardEvent?t.key:void 0};this.$emit("refresh",e),clearInterval(this.timer),clearInterval(this.counter),this.setDisplay(),this.start=Date.now(),this.diff=0,this.setTimer()}},beforeDestroy:function(){clearInterval(this.timer),clearInterval(this.counter);for(var t=this.events.length-1;t>=0;t-=1)window.removeEventListener(this.events[t],this.clearTimer)}}),e={install:function(e){e.component("v-idle",t)}};exports.default=e,exports.vidle=t;
